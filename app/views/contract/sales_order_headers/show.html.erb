<h4><%= t 'sales_order' %> <%= @tax_type_name %> - <%= t 'detail' %></h4>

<table id="table_header" class="table table-striped table-condensed">
  <tr>
    <th class="span2"><%= "#{t 'so_id'}" %></th>
    <th class="span5">: <%= @sales_order_header.so_id %></th>
    <th class="span2"><%= "#{t 'customer'}" %></th>
    <td><b>:</b> <%= @sales_order_header.customer.try(:name) %></td>
  </tr>
  <tr>
    <th><%= "#{t 'dates'}" %></th>
    <td><b>:</b> <%= date_without_localtime(@sales_order_header.sales_order_date) %></td>
    <th><%= "#{t 'cp'}" %></th>
    <td><b>:</b> <%= @sales_order_header.contact_person %></td>
  </tr>
  <tr>
    <th><%=  "#{t 'sales_person'}" %></th>
    <td><b>:</b> <%= @sales_full_name %></td>
    <th><%= "#{t 'notes'}" %></th>
    <td><b>:</b> <%= truncate(@sales_order_header.notes, :length => 40) %> (<u><%= link_to "#{t 'read_more'}", view_note_sales_order_header_path(@sales_order_header.id), :remote => true %></u>)</td>
  </tr>
  <tr>
    <th><%= "#{t 'currency'}" %></th>
    <td><b>:</b> <%= @sales_order_header.currency.try(:code) %> - <%= delimiter(@sales_order_header.exchrate) %></th>
    <th><%=  "#{t 'employee'}" %></th>
    <td><b>:</b> <%= @sales_order_header.employee_name %></td>
  </tr>
</table>

<div id="note_modal"></div>

<div class="row-fluid">
  <div class="span6">
    <h4><%= "#{t 'detail'}" %> (<%= link_to "#{t 'add'}", new_sales_order_header_sales_order_detail_path(@sales_order_header.id), :remote => true %>)</h4>
  </div>
  <div class="span6" align="right">
    <%= link_to "#{t 'edit'}", edit_sales_order_header_path(@sales_order_header, params.except(:action, :controller)) if @sales_order_header.close==false %>
     | 
    <%= link_to "#{t 'back'}", sales_order_headers_path(params.except(:action, :controller, :id)) %>
  </div>
</div>

<div id="detail_table"><%= render "/sales_order_details/table" %></div>

<div class="row">
  <div class="span9" align="right"><b><%= t 'sub_amount' %>:</b></div>
  <div class="span2" align="right" id="<%= "so_amount_#{@sales_order_header.id}" %>"><%= @sales_order_header.currency.try(:code) %> <%= delimiter(@subtotal_amount.to_f) %></div>
  <div align="right"><%= link_to "#{t 'add'} #{t 'discount'}", add_discount_sales_order_header_path(@sales_order_header.id, :tt => params[:tt]), :remote => true %></div>
</div>

<div class="row">
  <div class="span9" align="right"><b><%= t 'promo_disc' %>:</b></div>
  <div class="span2" align="right" id="<%= "so_discount_#{@sales_order_header.id}" %>"><%= delimiter(@sales_order_header.discount.to_f) %> %</div>
</div>

<div class="row">
  <div class="span9" align="right"><b><%= t 'discount_amount' %>:</b></div>
  <div class="span2" align="right" id="<%= "so_discount_amount_#{@sales_order_header.id}" %>"><%= @sales_order_header.currency.try(:code) %> <%= currency(@discount_amount.to_f) %></div>
</div>

<div class="row">
  <div class="span9" align="right"><b><%= t 'cash_disc' %>:</b></div>
  <div class="span2" align="right" id="<%= "so_cash_disc_#{@sales_order_header.id}" %>"><%= @sales_order_header.currency.try(:code) %> <%= delimiter(@sales_order_header.cash_disc.to_f) %> %</div>
</div>

<div class="row">
  <div class="span9" align="right"><b><%= t 'tax' %>:</b></div>
  <div class="span2" align="right" id="<%= "so_tax_#{@sales_order_header.id}" %>">
    <%= check_box('sales_order_header', 'tax', options = {:index => @sales_order_header.id, :checked => @sales_order_header.tax, :disabled => true}, checked_value = true, unchecked_value = false) %>
  </div>
</div>

<div class="row">
  <div class="span9" align="right"><b><%= t 'tax_amount' %>:</b></div>
  <div class="span2" align="right" id="<%= "so_tax_amount_#{@sales_order_header.id}" %>"><u><%= @sales_order_header.currency.try(:code) %> <%= delimiter(@tax_amount.to_f) %></u></div>
</div>

<div class="row">
  <div class="span9" align="right"><b><%= (t 'total_amount').upcase %>:</b></div>
  <div class="span2" align="right" id="<%= "so_total_amount_#{@sales_order_header.id}" %>"><b><%= @sales_order_header.currency.try(:code) %> <%= delimiter(@sales_order_header.total_amount.to_f) %></b></div>
</div>

<hr>
<div style="text-align: center;">
  <% if @split_tax_and_non_tax_transaction == 1 %>
  <%= link_to "#{(t 'post').upcase}", status_post_sales_order_header_path(@sales_order_header.id, :tt => params[:tt]), :class => "btn btn-large btn-primary" %>
  <% else %>
  <%= link_to "#{(t 'post').upcase}", status_post_sales_order_header_path(@sales_order_header.id), :class => "btn btn-large btn-primary" %>
  <% end %>
</div>

<div id="sales_order_detail_modal" title="" style="display:none"></div>

<div id="form_discount_modal" title="" style="display:none"></div>