<h4><%= t 'sales_invoice' %> - <%= t 'detail' %></h4>

<% if @sales_invoice_header.status==1 %>
  <h4 class="status_1" align="center"><%= t 'status_post' %> <%= complete_datetime(@sales_invoice_header.updated_at) %></h4>
<% else %>
  <h4 class="status_5" align="center"><%= t 'status_void' %> <%= complete_datetime(@sales_invoice_header.updated_at) %></h4>
<% end %>

<table class="table table-striped table-condensed">
  <tr>
    <th class="span2"><%= t 'si_id' %></th>
    <th class="span5">: <%= @sales_invoice_header.si_id %></th>
    <th class="span3"><%= t 'so_id' %></th>
    <td><b>:</b> <%= link_to @sales_invoice_header.so_id, show_post_void_sales_order_header_path(SalesOrderHeader.where(:so_id => @sales_invoice_header.so_id).last.id), :target => "_blank" if @sales_invoice_header.so_id.present? %></td>
  </tr>
  <tr>
    <th><%= t 'dates' %></th>
    <td><b>:</b> <%= @sales_invoice_header.sales_invoice_date.strftime("%d-%m-%Y") %></td>
    <th><%= t 'do_id' %></th>
    <td><b>:</b> <%= link_to @sales_invoice_header.do_id, DeliveryOrderHeader.where(:do_id => @sales_invoice_header.do_id).last, :target => "_blank" if @sales_invoice_header.do_id.present? %></td>
  </tr>
  <tr>
    <th><%= t 'due_date' %></th>
    <td><b>:</b> <%= @sales_invoice_header.due_date.strftime("%d-%m-%Y") %></td>
    <th><%= t 'sales_person' %></th>
    <td><b>:</b> <%= @sales_invoice_header.try(:sales_person_name) %></td>
  </tr>
  <tr>
    <th><%= t 'customer' %></th>
    <td><b>:</b> <%= @sales_invoice_header.customer.try(:name) %></td>
    <th><%= t 'warehouse' %></th>
    <td><b>:</b> <%= @sales_invoice_header.warehouse.try(:name) %></td>
  </tr>
  <tr>
    <th><%= t 'employee' %></th>
    <td><b>:</b> <%= @sales_invoice_header.employee_name %></td>
    <th><%= t 'notes' %></th>
    <td><b>:</b> <%= truncate(@sales_invoice_header.notes, :length => 40) %> (<%= link_to "#{t 'read_more'}", view_note_sales_invoice_header_path(@sales_invoice_header.id), :remote => true %>)</td>
  </tr>
  <tr>
    <th><%= t 'fp_code' %></th>
    <td><b>:</b> <%= @sales_invoice_header.fp_code %></td>
    <th></th>
    <td></td>
  </tr>
</table>

<div align="right"><% if @sales_invoice_header.status == 1 %><%= link_to "#{t 'pdf'}", sales_invoice_header_path(@sales_invoice_header, :tt => params[:tt], :format => :pdf) %> | <% end %>
  <%= link_to "#{t 'back'}", sales_invoice_headers_path(params.except(:action, :controller, :id)) %>
</div>

<h4><%= t 'detail' %></h4>

<%= render "sales_invoice_details/table" %>

<div class="row">
  <div class="span10" align="right"><b><%= t 'sub_amount' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_amount_#{@sales_invoice_header.id}" %>"><%= @sales_invoice_header.currency.try(:code) %> <%= delimiter(@sales_invoice_header.amount.to_f) %></div>
</div>

<div class="row">
  <div class="span10" align="right"><b><%= t 'promo_disc' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_discount_#{@sales_invoice_header.id}" %>"><%= delimiter(@sales_invoice_header.discount.to_f) %> %</div>
</div>

<div class="row">
  <div class="span10" align="right"><b><%= t 'disc_rp' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_discount_amount_#{@sales_invoice_header.id}" %>"><%= @sales_invoice_header.currency.try(:code) %> <%= delimiter(@sales_invoice_header.discount_amount.to_f) %></div>
</div>

<div class="row">
  <div class="span10" align="right"><b><%= t 'cash_disc' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_cash_disc_#{@sales_invoice_header.id}" %>"><%= @sales_invoice_header.currency.try(:code) %> <%= delimiter(@sales_invoice_header.cash_disc.to_f) %> %</div>
</div>

<div class="row">
  <div class="span10" align="right"><b><%= t 'tax' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_tax_#{@sales_invoice_header.id}" %>"><%= check_box('sales_invoice_header', 'tax', options = {:index => @sales_invoice_header.id, :checked => @sales_invoice_header.tax, :disabled => true}, checked_value = "1", unchecked_value = "0") %></div>
</div>

<div class="row">
  <div class="span10" align="right"><b><%= t 'tax_amount' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_tax_amount_#{@sales_invoice_header.id}" %>"><%= @sales_invoice_header.currency.try(:code) %> <%= delimiter(@sales_invoice_header.tax_amount.floor) %></div>
</div>

<div class="row">
  <div class="span10" align="right"><b><%= t 'total_amount' %>:</b></div>
  <div class="span2" align="right" id="<%= "si_total_amount_#{@sales_invoice_header.id}" %>"><b><%= @sales_invoice_header.currency.try(:code) %> <%= delimiter(@sales_invoice_header.total_amount.floor) %></b></div>
</div>

<hr>
<% if @sales_invoice_header.status == 1 %>
  <div style="text-align: center;">
    <%= link_to "#{(t 'void').upcase}", status_void_sales_invoice_header_path(@sales_invoice_header.id), :class => "btn btn-large btn-danger", :disable_with => "#{t 'disable_with'}" %>
  </div>
<% end %>

<div id="note_modal"></div>

<div id="form_discount_modal"></div>

<div id="sales_invoice_detail_modal"></div>